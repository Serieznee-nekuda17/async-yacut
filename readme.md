# YaCut - Сервис укорочения ссылок и загрузки файлов

YaCut - это сервис для создания коротких ссылок и асинхронной загрузки файлов на Яндекс.Диск с генерацией коротких ссылок для скачивания.

## Основные возможности

- Преобразование длинных URL в короткие удобные ссылки
- Возможность указать свой вариант короткой ссылки
- Автоматическая генерация коротких ссылок (6 случайных символов)
- Асинхронная загрузка файлов на Яндекс.Диск
- Генерация коротких ссылок для скачивания загруженных файлов
- REST API для интеграции с другими сервисами

## Технологии

- Python 3.9+
- Flask
- SQLAlchemy (SQLite)
- aiohttp (для работы с Яндекс.Диском)
- WTForms

## Установка и запуск

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/yourusername/yacut.git
   cd yacut
   ```
2. Создайте и активируйте виртуальное окружение:
    ```bash
    python -m venv venv
    source venv/bin/activate  # Linux/MacOS
    venv\Scripts\activate     # Windows
    ```
3. Установите зависимости:
    ```bash
    pip install -r requirements.txt
    ```
4. Создайте файл .env и задайте переменные окружения:
    ```bash
    FLASK_APP=yacut
    FLASK_ENV=development
    DATABASE_URI=sqlite:///db.sqlite3
    DISK_TOKEN=your_yandex_disk_token
    SECRET_KEY=your_secret_key
    ```
5. Инициализируйте базу данных:
    ```bash
    flask db init
    flask db migrate
    flask db upgrade
    ```
6. Запустите приложение:
    ```bash
    flask run
    ```
## Использование
### Веб-интерфейс
1. Главная страница (/):

    - Введите длинный URL в поле "Длинная ссылка"

    - При желании укажите свой вариант короткой ссылки (до 16 символов)

    - Нажмите "Создать"

2. Страница загрузки файлов (/files):

    - Выберите один или несколько файлов для загрузки

    - Нажмите "Загрузить"

    - После загрузки вы получите список коротких ссылок для скачивания файлов

## API
Сервис предоставляет REST API для работы с короткими ссылками:

- `POST /api/id/` - Создание новой короткой ссылки

- `GET /api/id/<short_id>/` - Получение оригинальной ссылки по короткому идентификатору

Подробная документация API доступна в файле openapi.yml. Для просмотра документации можно использовать Swagger Editor.

## Модели данных
Основная модель - `URLMap`:

- `id` - первичный ключ

- `original` - оригинальная длинная ссылка

- `short` - короткий идентификатор

- `timestamp` - временная метка создания

## Формы
1. **Основная форма**:

    - ``original_link`` - обязательное поле для длинной ссылки

    - ``custom_id`` - необязательное поле для пользовательского короткого идентификатора

2. **Форма загрузки файлов**:

    - ``files`` - обязательное поле для выбора файлов

## Тестирование

Для тестирования API можно использовать коллекцию Postman, расположенную в директории ``postman_collection``.`
